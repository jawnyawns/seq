<!DOCTYPE HTML>
<html>

<head>
  <meta charset="UTF-8">
  <title>SEQ</title>
  <link rel="stylesheet" href="./css/index.css">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;700&display=swap" rel="stylesheet">

  <link rel="icon" href="./img/minus.svg">
</head>

<body>
</body>

<script src="./js/index.js"></script>
<script>
  const STORAGE_KEY = "storage";

  const url = new URL(location);
  const mode = url.searchParams.get("mode");

  const app = Elm.Main.init({
    flags: {
      encodedGameModel: JSON.parse(localStorage.getItem(STORAGE_KEY)),
      mode: mode ? Number.parseInt(mode) : 0,
    },
  });

  app.ports.outbound.subscribe((event) => {
    switch (event.tag) {
      case 'SetStorage':
        localStorage.setItem(STORAGE_KEY, JSON.stringify(event.value));
        break;
    }
  });
</script>

</html>
